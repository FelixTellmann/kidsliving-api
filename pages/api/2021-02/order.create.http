# SHOPIFY
POST http://localhost:3000/api/2021-02/order.create
Content-Type: application/json
Accept: application/json
x-shopify-shop-domain: kids-living.myshopify.com

{
  "id": 3708484681903,
  "admin_graphql_api_id": "gid://shopify/Order/3708484681903",
  "app_id": 580111,
  "browser_ip": "105.23.232.26",
  "buyer_accepts_marketing": true,
  "cancel_reason": null,
  "cancelled_at": null,
  "cart_token": null,
  "checkout_id": 20163152806063,
  "checkout_token": "86bfc94ebcb60e697fd2a66c0bddc14a",
  "client_details": {
    "accept_language": "en-us",
    "browser_height": 660,
    "browser_ip": "105.23.232.26",
    "browser_width": 1024,
    "session_hash": null,
    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.3 Safari/605.1.15"
  },
  "closed_at": null,
  "confirmed": true,
  "contact_email": "melissapage.za@gmail.com",
  "created_at": "2021-03-27T13:39:20+02:00",
  "currency": "ZAR",
  "current_subtotal_price": "5153.00",
  "current_subtotal_price_set": {
    "shop_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_discounts": "0.00",
  "current_total_discounts_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_duties_set": null,
  "current_total_price": "5153.00",
  "current_total_price_set": {
    "shop_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_tax": "672.13",
  "current_total_tax_set": {
    "shop_money": {
      "amount": "672.13",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "672.13",
      "currency_code": "ZAR"
    }
  },
  "customer_locale": "en",
  "device_id": null,
  "discount_codes": [],
  "email": "melissapage.za@gmail.com",
  "financial_status": "paid",
  "fulfillment_status": "fulfilled",
  "gateway": "paygate",
  "landing_site": "/collections/ikea",
  "landing_site_ref": null,
  "location_id": null,
  "name": "#12935",
  "note": "TCG29548395",
  "note_attributes": [],
  "number": 11935,
  "order_number": 12935,
  "order_status_url": "https://kidsliving.co.za/15673213/orders/c1cb29111b1deb2ad95f09227fba1e04/authenticate?key=fbfd0de4fd4465e0340c6ccbd0be74be",
  "original_total_duties_set": null,
  "payment_gateway_names": [
    "paygate"
  ],
  "phone": "+27723263282",
  "presentment_currency": "ZAR",
  "processed_at": "2021-03-27T13:39:19+02:00",
  "processing_method": "offsite",
  "reference": null,
  "referring_site": "https://www.google.co.za/",
  "source_identifier": null,
  "source_name": "web",
  "source_url": null,
  "subtotal_price": "5153.00",
  "subtotal_price_set": {
    "shop_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    }
  },
  "tags": "",
  "tax_lines": [
    {
      "price": "672.13",
      "rate": 0.15,
      "title": "VAT",
      "price_set": {
        "shop_money": {
          "amount": "672.13",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "672.13",
          "currency_code": "ZAR"
        }
      }
    }
  ],
  "taxes_included": true,
  "test": false,
  "token": "c1cb29111b1deb2ad95f09227fba1e04",
  "total_discounts": "0.00",
  "total_discounts_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "total_line_items_price": "5153.00",
  "total_line_items_price_set": {
    "shop_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    }
  },
  "total_outstanding": "0.00",
  "total_price": "5153.00",
  "total_price_set": {
    "shop_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "5153.00",
      "currency_code": "ZAR"
    }
  },
  "total_price_usd": "343.84",
  "total_shipping_price_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "total_tax": "672.13",
  "total_tax_set": {
    "shop_money": {
      "amount": "672.13",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "672.13",
      "currency_code": "ZAR"
    }
  },
  "total_tip_received": "0.00",
  "total_weight": 50000,
  "updated_at": "2021-03-30T13:28:24+02:00",
  "user_id": null,
  "billing_address": {
    "first_name": "Melissa",
    "address1": "52 Glen Grey Drive",
    "phone": "072 326 3282",
    "city": "Waterfall",
    "zip": "3610",
    "province": "KwaZulu-Natal",
    "country": "South Africa",
    "last_name": "Page",
    "address2": "Unit 5 Waterford Country Estate",
    "company": "Melissa Page",
    "latitude": null,
    "longitude": null,
    "name": "Melissa Page",
    "country_code": "ZA",
    "province_code": "NL"
  },
  "customer": {
    "id": 5098353918127,
    "email": "melissapage.za@gmail.com",
    "accepts_marketing": true,
    "created_at": "2021-03-27T13:09:58+02:00",
    "updated_at": "2021-03-27T13:39:21+02:00",
    "first_name": "Melissa",
    "last_name": "Page",
    "orders_count": 1,
    "state": "enabled",
    "total_spent": "5153.00",
    "last_order_id": 3708484681903,
    "note": null,
    "verified_email": false,
    "multipass_identifier": null,
    "tax_exempt": false,
    "phone": null,
    "tags": "",
    "last_order_name": "#12935",
    "currency": "ZAR",
    "accepts_marketing_updated_at": "2021-03-27T13:09:58+02:00",
    "marketing_opt_in_level": "single_opt_in",
    "tax_exemptions": [],
    "admin_graphql_api_id": "gid://shopify/Customer/5098353918127",
    "default_address": {
      "id": 6265953157295,
      "customer_id": 5098353918127,
      "first_name": "Melissa",
      "last_name": "Page",
      "company": "Melissa Page",
      "address1": "52 Glen Grey Drive",
      "address2": "Unit 5 Waterford Country Estate",
      "city": "Waterfall",
      "province": "KwaZulu-Natal",
      "country": "South Africa",
      "zip": "3610",
      "phone": "072 326 3282",
      "name": "Melissa Page",
      "province_code": "NL",
      "country_code": "ZA",
      "country_name": "South Africa",
      "default": true
    }
  },
  "discount_applications": [],
  "fulfillments": [
    {
      "id": 3280628646063,
      "admin_graphql_api_id": "gid://shopify/Fulfillment/3280628646063",
      "created_at": "2021-03-30T13:28:24+02:00",
      "location_id": 22530642,
      "name": "#12935.1",
      "order_id": 3708484681903,
      "receipt": {},
      "service": "manual",
      "shipment_status": null,
      "status": "success",
      "tracking_company": "Other",
      "tracking_number": "TCG29548395",
      "tracking_numbers": [
        "TCG29548395"
      ],
      "tracking_url": null,
      "tracking_urls": [],
      "updated_at": "2021-03-30T13:28:24+02:00",
      "line_items": [
        {
          "id": 9706984603823,
          "admin_graphql_api_id": "gid://shopify/LineItem/9706984603823",
          "fulfillable_quantity": 0,
          "fulfillment_service": "manual",
          "fulfillment_status": "fulfilled",
          "gift_card": false,
          "grams": 2000,
          "name": "Kallax Insert with Door - white",
          "origin_location": {
            "id": 2030453063740,
            "country_code": "ZA",
            "province_code": "WC",
            "name": "Kids Living",
            "address1": "15 Hudson Street",
            "address2": "Greenpoint",
            "city": "Cape Town",
            "zip": "8001"
          },
          "price": "339.00",
          "price_set": {
            "shop_money": {
              "amount": "339.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "339.00",
              "currency_code": "ZAR"
            }
          },
          "product_exists": true,
          "product_id": 136492384274,
          "properties": [],
          "quantity": 4,
          "requires_shipping": true,
          "sku": "11018",
          "taxable": true,
          "title": "Kallax Insert with Door",
          "total_discount": "0.00",
          "total_discount_set": {
            "shop_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            }
          },
          "variant_id": 1328558931986,
          "variant_inventory_management": "shopify",
          "variant_title": "white",
          "vendor": "Ikea",
          "tax_lines": [
            {
              "price": "176.87",
              "price_set": {
                "shop_money": {
                  "amount": "176.87",
                  "currency_code": "ZAR"
                },
                "presentment_money": {
                  "amount": "176.87",
                  "currency_code": "ZAR"
                }
              },
              "rate": 0.15,
              "title": "VAT"
            }
          ],
          "duties": [],
          "discount_allocations": []
        },
        {
          "id": 9706984636591,
          "admin_graphql_api_id": "gid://shopify/LineItem/9706984636591",
          "fulfillable_quantity": 0,
          "fulfillment_service": "manual",
          "fulfillment_status": "fulfilled",
          "gift_card": false,
          "grams": 14000,
          "name": "Kallax Bookcase 42 x 147",
          "origin_location": {
            "id": 2030453063740,
            "country_code": "ZA",
            "province_code": "WC",
            "name": "Kids Living",
            "address1": "15 Hudson Street",
            "address2": "Greenpoint",
            "city": "Cape Town",
            "zip": "8001"
          },
          "price": "1349.00",
          "price_set": {
            "shop_money": {
              "amount": "1349.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "1349.00",
              "currency_code": "ZAR"
            }
          },
          "product_exists": true,
          "product_id": 10091920146,
          "properties": [],
          "quantity": 2,
          "requires_shipping": true,
          "sku": "FKALLAX42X147",
          "taxable": true,
          "title": "Kallax Bookcase 42 x 147",
          "total_discount": "0.00",
          "total_discount_set": {
            "shop_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            }
          },
          "variant_id": 39127647186,
          "variant_inventory_management": "shopify",
          "variant_title": "",
          "vendor": "Ikea",
          "tax_lines": [
            {
              "price": "351.91",
              "price_set": {
                "shop_money": {
                  "amount": "351.91",
                  "currency_code": "ZAR"
                },
                "presentment_money": {
                  "amount": "351.91",
                  "currency_code": "ZAR"
                }
              },
              "rate": 0.15,
              "title": "VAT"
            }
          ],
          "duties": [],
          "discount_allocations": []
        },
        {
          "id": 9706984702127,
          "admin_graphql_api_id": "gid://shopify/LineItem/9706984702127",
          "fulfillable_quantity": 0,
          "fulfillment_service": "manual",
          "fulfillment_status": "fulfilled",
          "gift_card": false,
          "grams": 14000,
          "name": "Kallax Bookcase 77 x 77",
          "origin_location": {
            "id": 2030453063740,
            "country_code": "ZA",
            "province_code": "WC",
            "name": "Kids Living",
            "address1": "15 Hudson Street",
            "address2": "Greenpoint",
            "city": "Cape Town",
            "zip": "8001"
          },
          "price": "1099.00",
          "price_set": {
            "shop_money": {
              "amount": "1099.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "1099.00",
              "currency_code": "ZAR"
            }
          },
          "product_exists": true,
          "product_id": 10000114002,
          "properties": [],
          "quantity": 1,
          "requires_shipping": true,
          "sku": "FKALLAX77",
          "taxable": true,
          "title": "Kallax Bookcase 77 x 77",
          "total_discount": "0.00",
          "total_discount_set": {
            "shop_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            }
          },
          "variant_id": 38694480146,
          "variant_inventory_management": "shopify",
          "variant_title": "",
          "vendor": "Ikea",
          "tax_lines": [
            {
              "price": "143.35",
              "price_set": {
                "shop_money": {
                  "amount": "143.35",
                  "currency_code": "ZAR"
                },
                "presentment_money": {
                  "amount": "143.35",
                  "currency_code": "ZAR"
                }
              },
              "rate": 0.15,
              "title": "VAT"
            }
          ],
          "duties": [],
          "discount_allocations": []
        }
      ]
    }
  ],
  "line_items": [
    {
      "id": 9706984603823,
      "admin_graphql_api_id": "gid://shopify/LineItem/9706984603823",
      "fulfillable_quantity": 0,
      "fulfillment_service": "manual",
      "fulfillment_status": "fulfilled",
      "gift_card": false,
      "grams": 2000,
      "name": "Kallax Insert with Door - white",
      "origin_location": {
        "id": 2030453063740,
        "country_code": "ZA",
        "province_code": "WC",
        "name": "Kids Living",
        "address1": "15 Hudson Street",
        "address2": "Greenpoint",
        "city": "Cape Town",
        "zip": "8001"
      },
      "price": "339.00",
      "price_set": {
        "shop_money": {
          "amount": "339.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "339.00",
          "currency_code": "ZAR"
        }
      },
      "product_exists": true,
      "product_id": 136492384274,
      "properties": [],
      "quantity": 4,
      "requires_shipping": true,
      "sku": "11018",
      "taxable": true,
      "title": "Kallax Insert with Door",
      "total_discount": "0.00",
      "total_discount_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "variant_id": 1328558931986,
      "variant_inventory_management": "shopify",
      "variant_title": "white",
      "vendor": "Ikea",
      "tax_lines": [
        {
          "price": "176.87",
          "price_set": {
            "shop_money": {
              "amount": "176.87",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "176.87",
              "currency_code": "ZAR"
            }
          },
          "rate": 0.15,
          "title": "VAT"
        }
      ],
      "duties": [],
      "discount_allocations": []
    },
    {
      "id": 9706984636591,
      "admin_graphql_api_id": "gid://shopify/LineItem/9706984636591",
      "fulfillable_quantity": 0,
      "fulfillment_service": "manual",
      "fulfillment_status": "fulfilled",
      "gift_card": false,
      "grams": 14000,
      "name": "Kallax Bookcase 42 x 147",
      "origin_location": {
        "id": 2030453063740,
        "country_code": "ZA",
        "province_code": "WC",
        "name": "Kids Living",
        "address1": "15 Hudson Street",
        "address2": "Greenpoint",
        "city": "Cape Town",
        "zip": "8001"
      },
      "price": "1349.00",
      "price_set": {
        "shop_money": {
          "amount": "1349.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "1349.00",
          "currency_code": "ZAR"
        }
      },
      "product_exists": true,
      "product_id": 10091920146,
      "properties": [],
      "quantity": 2,
      "requires_shipping": true,
      "sku": "FKALLAX42X147",
      "taxable": true,
      "title": "Kallax Bookcase 42 x 147",
      "total_discount": "0.00",
      "total_discount_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "variant_id": 39127647186,
      "variant_inventory_management": "shopify",
      "variant_title": "",
      "vendor": "Ikea",
      "tax_lines": [
        {
          "price": "351.91",
          "price_set": {
            "shop_money": {
              "amount": "351.91",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "351.91",
              "currency_code": "ZAR"
            }
          },
          "rate": 0.15,
          "title": "VAT"
        }
      ],
      "duties": [],
      "discount_allocations": []
    },
    {
      "id": 9706984702127,
      "admin_graphql_api_id": "gid://shopify/LineItem/9706984702127",
      "fulfillable_quantity": 0,
      "fulfillment_service": "manual",
      "fulfillment_status": "fulfilled",
      "gift_card": false,
      "grams": 14000,
      "name": "Kallax Bookcase 77 x 77",
      "origin_location": {
        "id": 2030453063740,
        "country_code": "ZA",
        "province_code": "WC",
        "name": "Kids Living",
        "address1": "15 Hudson Street",
        "address2": "Greenpoint",
        "city": "Cape Town",
        "zip": "8001"
      },
      "price": "1099.00",
      "price_set": {
        "shop_money": {
          "amount": "1099.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "1099.00",
          "currency_code": "ZAR"
        }
      },
      "product_exists": true,
      "product_id": 10000114002,
      "properties": [],
      "quantity": 1,
      "requires_shipping": true,
      "sku": "FKALLAX77",
      "taxable": true,
      "title": "Kallax Bookcase 77 x 77",
      "total_discount": "0.00",
      "total_discount_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "variant_id": 38694480146,
      "variant_inventory_management": "shopify",
      "variant_title": "",
      "vendor": "Ikea",
      "tax_lines": [
        {
          "price": "143.35",
          "price_set": {
            "shop_money": {
              "amount": "143.35",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "143.35",
              "currency_code": "ZAR"
            }
          },
          "rate": 0.15,
          "title": "VAT"
        }
      ],
      "duties": [],
      "discount_allocations": []
    }
  ],
  "refunds": [],
  "shipping_address": {
    "first_name": "Melissa",
    "address1": "52 Glen Grey Drive",
    "phone": "072 326 3282",
    "city": "Waterfall",
    "zip": "3610",
    "province": "KwaZulu-Natal",
    "country": "South Africa",
    "last_name": "Page",
    "address2": "Unit 5 Waterford Country Estate",
    "company": "Melissa Page",
    "latitude": null,
    "longitude": null,
    "name": "Melissa Page",
    "country_code": "ZA",
    "province_code": "NL"
  },
  "shipping_lines": [
    {
      "id": 3148345671855,
      "carrier_identifier": "414127336c64f5eed2fa6b34fbc5a7e3",
      "code": "courier-door-to-door-delivery-economy",
      "delivery_category": null,
      "discounted_price": "0.00",
      "discounted_price_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "phone": null,
      "price": "0.00",
      "price_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "requested_fulfillment_service_id": null,
      "source": "uAfrica Shipping Zones",
      "title": "Courier Door to Door Delivery - Economy",
      "tax_lines": [],
      "discount_allocations": []
    }
  ]
}


###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  order(id: "gid://shopify/Order/3251164250287") {
    fulfillmentOrders(first: 10) {
      edges {
        node {
          id
          status
          assignedLocation {
            name
          }
          lineItems(first: 20) {
            edges {
              node {
                lineItem {
                  name
                  variant {
                    id
                  }
                }
                remainingQuantity
                totalQuantity
              }
            }
          }
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  productVariant(id: "gid://shopify/ProductVariant/38312911372463") {
    id
    metafields(first: 10) {
      edges {
        node {
          id
          key
          namespace
          value
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  product(id: "gid://shopify/Product/4536570904636") {
    id
    status
    productType
    descriptionHtml
    tags
    featuredImage {
      id
    }
    metafield(key: "shopify", namespace: "vend") {
      key
      value
    }
    variants(first: 32) {
      edges {
        node {
          id
          image {
            id
          }
          inventoryQuantity
          price
          sku
          selectedOptions {
            value
          }
          metafield(key: "active", namespace: "vend") {
            key
            value
          }
          inventoryItem {
            id
            inventoryLevels(first: 2) {
              edges {
                node {
                  id
                  available
                  location {
                    id
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

mutation {
  productVariantUpdate(input: {id: "gid://shopify/ProductVariant/38312911372463", metafields: [{ key: "active", valueType: STRING, value: "false", namespace: "vend"}]}) {
    product {
      id
    }
    productVariant {
      id
    }
    userErrors {
      field
      message
    }
  }
}

###
