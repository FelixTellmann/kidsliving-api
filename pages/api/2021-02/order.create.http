# SHOPIFY
POST http://localhost:3000/api/2021-02/order.create
Content-Type: application/json
Accept: application/json
x-shopify-shop-domain: kids-living.myshopify.com

{
  "id": 3719614431407,
  "admin_graphql_api_id": "gid://shopify/Order/3719614431407",
  "app_id": 580111,
  "browser_ip": "196.22.241.133",
  "buyer_accepts_marketing": true,
  "cancel_reason": null,
  "cancelled_at": null,
  "cart_token": null,
  "checkout_id": 20247327277231,
  "checkout_token": "7e8feb309c2c3865f5219821e069ba6b",
  "client_details": {
    "accept_language": "en-us",
    "browser_height": 1478,
    "browser_ip": "196.22.241.133",
    "browser_width": 2558,
    "session_hash": null,
    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.2 Safari/605.1.15"
  },
  "closed_at": null,
  "confirmed": true,
  "contact_email": "info@origininteriors.com",
  "created_at": "2021-04-01T13:20:49+02:00",
  "currency": "ZAR",
  "current_subtotal_price": "4790.00",
  "current_subtotal_price_set": {
    "shop_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_discounts": "0.00",
  "current_total_discounts_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_duties_set": null,
  "current_total_price": "4790.00",
  "current_total_price_set": {
    "shop_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    }
  },
  "current_total_tax": "624.78",
  "current_total_tax_set": {
    "shop_money": {
      "amount": "624.78",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "624.78",
      "currency_code": "ZAR"
    }
  },
  "customer_locale": "en",
  "device_id": null,
  "discount_codes": [],
  "email": "info@origininteriors.com",
  "financial_status": "paid",
  "fulfillment_status": "fulfilled",
  "gateway": "paygate",
  "landing_site": "/",
  "landing_site_ref": null,
  "location_id": null,
  "name": "#12998",
  "note": "Please can we only received Delivery of the items on 4 May 2021\nThank you ",
  "note_attributes": [],
  "number": 11998,
  "order_number": 12998,
  "order_status_url": "https://kidsliving.co.za/15673213/orders/3e9213c2f6250d90436a05dbd2f58bdd/authenticate?key=25c5a94c28bd6e072f26b8e404397f33",
  "original_total_duties_set": null,
  "payment_gateway_names": [
    "paygate"
  ],
  "phone": null,
  "presentment_currency": "ZAR",
  "processed_at": "2021-04-01T13:20:48+02:00",
  "processing_method": "offsite",
  "reference": null,
  "referring_site": "",
  "source_identifier": null,
  "source_name": "web",
  "source_url": null,
  "subtotal_price": "4790.00",
  "subtotal_price_set": {
    "shop_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    }
  },
  "tags": "",
  "tax_lines": [
    {
      "price": "624.78",
      "rate": 0.15,
      "title": "VAT",
      "price_set": {
        "shop_money": {
          "amount": "624.78",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "624.78",
          "currency_code": "ZAR"
        }
      }
    }
  ],
  "taxes_included": true,
  "test": false,
  "token": "3e9213c2f6250d90436a05dbd2f58bdd",
  "total_discounts": "0.00",
  "total_discounts_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "total_line_items_price": "4790.00",
  "total_line_items_price_set": {
    "shop_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    }
  },
  "total_outstanding": "0.00",
  "total_price": "4790.00",
  "total_price_set": {
    "shop_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "4790.00",
      "currency_code": "ZAR"
    }
  },
  "total_price_usd": "323.97",
  "total_shipping_price_set": {
    "shop_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "0.00",
      "currency_code": "ZAR"
    }
  },
  "total_tax": "624.78",
  "total_tax_set": {
    "shop_money": {
      "amount": "624.78",
      "currency_code": "ZAR"
    },
    "presentment_money": {
      "amount": "624.78",
      "currency_code": "ZAR"
    }
  },
  "total_tip_received": "0.00",
  "total_weight": 36000,
  "updated_at": "2021-05-05T14:00:46+02:00",
  "user_id": null,
  "billing_address": {
    "first_name": "Melissa",
    "address1": "90 Klein Constantia Road, Klein Constantia Estate, Klein Constantia ",
    "phone": "072 848 3635",
    "city": "Cape Town ",
    "zip": "7806",
    "province": "Western Cape",
    "country": "South Africa",
    "last_name": "Beukman",
    "address2": "",
    "company": "Weluka",
    "latitude": -34.0385508,
    "longitude": 18.4133995,
    "name": "Melissa Beukman",
    "country_code": "ZA",
    "province_code": "WC"
  },
  "customer": {
    "id": 5109128102063,
    "email": "info@origininteriors.com",
    "accepts_marketing": true,
    "created_at": "2021-04-01T13:10:59+02:00",
    "updated_at": "2021-04-01T13:20:49+02:00",
    "first_name": "Melissa",
    "last_name": "Beukman",
    "orders_count": 1,
    "state": "disabled",
    "total_spent": "4790.00",
    "last_order_id": 3719614431407,
    "note": null,
    "verified_email": true,
    "multipass_identifier": null,
    "tax_exempt": false,
    "phone": null,
    "tags": "",
    "last_order_name": "#12998",
    "currency": "ZAR",
    "accepts_marketing_updated_at": "2021-04-01T13:10:59+02:00",
    "marketing_opt_in_level": "single_opt_in",
    "tax_exemptions": [],
    "admin_graphql_api_id": "gid://shopify/Customer/5109128102063",
    "default_address": {
      "id": 6278177095855,
      "customer_id": 5109128102063,
      "first_name": "Melissa",
      "last_name": "Beukman",
      "company": "Weluka",
      "address1": "90 Klein Constantia Road, Klein Constantia Estate, Klein Constantia ",
      "address2": "",
      "city": "Cape Town",
      "province": "Western Cape",
      "country": "South Africa",
      "zip": "7806",
      "phone": "072 848 3635",
      "name": "Melissa Beukman",
      "province_code": "WC",
      "country_code": "ZA",
      "country_name": "South Africa",
      "default": true
    }
  },
  "discount_applications": [],
  "fulfillments": [
    {
      "id": 3352272142511,
      "admin_graphql_api_id": "gid://shopify/Fulfillment/3352272142511",
      "created_at": "2021-05-04T12:46:53+02:00",
      "location_id": 22530642,
      "name": "#12998.1",
      "order_id": 3719614431407,
      "receipt": {},
      "service": "manual",
      "shipment_status": "delivered",
      "status": "success",
      "tracking_company": "Courier IT",
      "tracking_number": "UA664807500",
      "tracking_numbers": [
        "UA664807500"
      ],
      "tracking_url": "https://kidsliving.co.za/a/track/12998",
      "tracking_urls": [
        "https://kidsliving.co.za/a/track/12998"
      ],
      "updated_at": "2021-05-05T14:00:46+02:00",
      "line_items": [
        {
          "id": 9726929338543,
          "admin_graphql_api_id": "gid://shopify/LineItem/9726929338543",
          "destination_location": {
            "id": 2855330873519,
            "country_code": "ZA",
            "province_code": "WC",
            "name": "Melissa Beukman",
            "address1": "90 Klein Constantia Road, Klein Constantia Estate, Klein Constantia ",
            "address2": "",
            "city": "Cape Town ",
            "zip": "7806"
          },
          "fulfillable_quantity": 0,
          "fulfillment_service": "manual",
          "fulfillment_status": "fulfilled",
          "gift_card": false,
          "grams": 18000,
          "name": "Trofast Combination white 6 boxes",
          "origin_location": {
            "id": 2030453063740,
            "country_code": "ZA",
            "province_code": "WC",
            "name": "Kids Living",
            "address1": "15 Hudson Street",
            "address2": "Greenpoint",
            "city": "Cape Town",
            "zip": "8001"
          },
          "price": "2395.00",
          "price_set": {
            "shop_money": {
              "amount": "2395.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "2395.00",
              "currency_code": "ZAR"
            }
          },
          "product_exists": true,
          "product_id": 4445382311996,
          "properties": [],
          "quantity": 2,
          "requires_shipping": true,
          "sku": "16842",
          "taxable": true,
          "title": "Trofast Combination white 6 boxes",
          "total_discount": "0.00",
          "total_discount_set": {
            "shop_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "0.00",
              "currency_code": "ZAR"
            }
          },
          "variant_id": 31729974280252,
          "variant_inventory_management": "shopify",
          "variant_title": "",
          "vendor": "Ikea",
          "tax_lines": [
            {
              "price": "624.78",
              "price_set": {
                "shop_money": {
                  "amount": "624.78",
                  "currency_code": "ZAR"
                },
                "presentment_money": {
                  "amount": "624.78",
                  "currency_code": "ZAR"
                }
              },
              "rate": 0.15,
              "title": "VAT"
            }
          ],
          "duties": [],
          "discount_allocations": []
        }
      ]
    }
  ],
  "line_items": [
    {
      "id": 9726929338543,
      "admin_graphql_api_id": "gid://shopify/LineItem/9726929338543",
      "destination_location": {
        "id": 2855330873519,
        "country_code": "ZA",
        "province_code": "WC",
        "name": "Melissa Beukman",
        "address1": "90 Klein Constantia Road, Klein Constantia Estate, Klein Constantia ",
        "address2": "",
        "city": "Cape Town ",
        "zip": "7806"
      },
      "fulfillable_quantity": 0,
      "fulfillment_service": "manual",
      "fulfillment_status": "fulfilled",
      "gift_card": false,
      "grams": 18000,
      "name": "Trofast Combination white 6 boxes",
      "origin_location": {
        "id": 2030453063740,
        "country_code": "ZA",
        "province_code": "WC",
        "name": "Kids Living",
        "address1": "15 Hudson Street",
        "address2": "Greenpoint",
        "city": "Cape Town",
        "zip": "8001"
      },
      "price": "2395.00",
      "price_set": {
        "shop_money": {
          "amount": "2395.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "2395.00",
          "currency_code": "ZAR"
        }
      },
      "product_exists": true,
      "product_id": 4445382311996,
      "properties": [],
      "quantity": 2,
      "requires_shipping": true,
      "sku": "16842",
      "taxable": true,
      "title": "Trofast Combination white 6 boxes",
      "total_discount": "0.00",
      "total_discount_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "variant_id": 31729974280252,
      "variant_inventory_management": "shopify",
      "variant_title": "",
      "vendor": "Ikea",
      "tax_lines": [
        {
          "price": "624.78",
          "price_set": {
            "shop_money": {
              "amount": "624.78",
              "currency_code": "ZAR"
            },
            "presentment_money": {
              "amount": "624.78",
              "currency_code": "ZAR"
            }
          },
          "rate": 0.15,
          "title": "VAT"
        }
      ],
      "duties": [],
      "discount_allocations": []
    }
  ],
  "refunds": [],
  "shipping_address": {
    "first_name": "Melissa",
    "address1": "90 Klein Constantia Road, Klein Constantia Estate, Klein Constantia ",
    "phone": "072 848 3635",
    "city": "Cape Town ",
    "zip": "7806",
    "province": "Western Cape",
    "country": "South Africa",
    "last_name": "Beukman",
    "address2": "",
    "company": "Weluka",
    "latitude": -34.0385508,
    "longitude": 18.4133995,
    "name": "Melissa Beukman",
    "country_code": "ZA",
    "province_code": "WC"
  },
  "shipping_lines": [
    {
      "id": 3155923435695,
      "carrier_identifier": "414127336c64f5eed2fa6b34fbc5a7e3",
      "code": "courier-door-to-door-delivery-economy",
      "delivery_category": null,
      "discounted_price": "0.00",
      "discounted_price_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "phone": null,
      "price": "0.00",
      "price_set": {
        "shop_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        },
        "presentment_money": {
          "amount": "0.00",
          "currency_code": "ZAR"
        }
      },
      "requested_fulfillment_service_id": null,
      "source": "uAfrica Shipping Zones",
      "title": "Courier Door to Door Delivery - Economy",
      "tax_lines": [],
      "discount_allocations": []
    }
  ]
}


###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  order(id: "gid://shopify/Order/3251164250287") {
    fulfillmentOrders(first: 10) {
      edges {
        node {
          id
          status
          assignedLocation {
            name
          }
          lineItems(first: 20) {
            edges {
              node {
                lineItem {
                  name
                  variant {
                    id
                  }
                }
                remainingQuantity
                totalQuantity
              }
            }
          }
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  productVariant(id: "gid://shopify/ProductVariant/37528030412975") {
    id
    metafields(first: 10) {
      edges {
        node {
          id
          key
          namespace
          value
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

{
  product(id: "gid://shopify/Product/4536570904636") {
    id
    status
    productType
    descriptionHtml
    tags
    featuredImage {
      id
    }
    metafield(key: "shopify", namespace: "vend") {
      key
      value
    }
    variants(first: 32) {
      edges {
        node {
          id
          image {
            id
          }
          inventoryQuantity
          price
          sku
          selectedOptions {
            value
          }
          metafield(key: "active", namespace: "vend") {
            key
            value
          }
          inventoryItem {
            id
            inventoryLevels(first: 2) {
              edges {
                node {
                  id
                  available
                  location {
                    id
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

###
# SHOPIFY create
POST https://kids-living.myshopify.com/admin/api/2021-01/graphql.json
Content-Type: application/graphql
X-Shopify-Access-Token: 7522f1ec2ce1989ac523647deae8d00b

# TODO quantities will be known from webhook - make use of it

mutation {
  productVariantUpdate(input: {id: "gid://shopify/ProductVariant/31841950007356", metafields: [{ key: "preorders", valueType: JSON_STRING, value: "[{\"name\":\"End May container\",\"quantity\":\"24.00000\"}]", namespace: "vend"}]}) {
    product {
      id
    }
    productVariant {
      id
    }
    userErrors {
      field
      message
    }
  }
}

###
